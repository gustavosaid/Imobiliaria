{% extends 'shared/base.html' %}
{% load static %}

{% block content %}

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
    /* --- CONFIGURAÇÕES GERAIS --- */
    :root {
        --primary-color: #4f46e5;
        --success-color: #059669;
        --text-dark: #1e293b;
        --text-gray: #64748b;
        --bg-page: #f8fafc;
    }

    body { background-color: var(--bg-page); }

    .property-section {
        font-family: 'Inter', sans-serif;
        color: var(--text-dark);
        padding-top: 40px; /* Reduzido */
        padding-bottom: 40px; /* Reduzido */
    }

    /* --- O CARTÃO (COMPACTO) --- */
    .property-card {
        background: #ffffff;
        border-radius: 16px; /* Borda um pouco menos redonda */
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05);
        overflow: hidden; 
        border: 1px solid #e2e8f0;
        max-width: 900px; /* TRAVA A LARGURA PARA NÃO FICAR GIGANTE */
        margin: 0 auto;   /* Centraliza o cartão */
    }

    /* --- COLUNA DA FOTO --- */
    .image-column {
        background-color: #e2e8f0;
        height: 100%;
        min-height: 350px; /* Reduzido de 500px para 350px */
        position: relative;
    }

    .property-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .badge-floating {
        position: absolute;
        top: 15px;
        left: 15px;
        background: rgba(255, 255, 255, 0.95);
        color: var(--primary-color);
        padding: 5px 12px; /* Menor */
        border-radius: 20px;
        font-size: 0.7rem;
        font-weight: 700;
        text-transform: uppercase;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .no-photo-wrap {
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: #94a3b8;
        min-height: 300px;
    }

    /* --- COLUNA DE DETALHES --- */
    .details-column {
        padding: 30px; /* Reduzido de 50px */
        display: flex;
        flex-direction: column;
        justify-content: center;
        height: 100%;
    }

    /* Título */
    .property-title {
        font-size: 1.5rem; /* Reduzido de 2.25rem */
        font-weight: 700;
        color: var(--text-dark);
        margin-bottom: 5px;
        line-height: 1.2;
    }

    /* Preço */
    .property-price {
        font-size: 1.8rem; /* Reduzido de 2.5rem */
        color: var(--success-color);
        font-weight: 700;
        margin-bottom: 20px;
    }

    .property-price span {
        font-size: 0.9rem;
        color: var(--text-gray);
        font-weight: 400;
    }

    /* Grid de Características */
    .features-grid {
        display: flex;
        gap: 20px;
        margin-bottom: 20px;
        padding-bottom: 20px;
        border-bottom: 1px solid #f1f5f9;
    }

    .feature-item {
        display: flex;
        align-items: center; /* Alinhado lateralmente para economizar espaço */
        gap: 8px;
    }

    .feature-icon {
        color: var(--primary-color);
        background: #eef2ff;
        width: 32px; /* Menor */
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 0.9rem;
    }

    .feature-text {
        font-size: 0.85rem;
        font-weight: 600;
        color: #475569;
    }

    /* Descrição */
    .desc-title {
        font-size: 0.7rem;
        font-weight: 700;
        color: #94a3b8;
        margin-bottom: 5px;
        text-transform: uppercase;
    }

    .property-description {
        color: var(--text-gray);
        line-height: 1.5;
        font-size: 0.9rem; /* Fonte menor */
        margin-bottom: 25px;
        display: -webkit-box;
        line-clamp: 4; /* Limita a 4 linhas de texto */
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    /* --- BOTÕES --- */
    .action-buttons {
        display: grid;
        grid-template-columns: 1fr 2fr;
        gap: 10px;
    }

    .btn-back, .btn-rent {
        padding: 10px 15px; /* Botões mais finos */
        border-radius: 10px;
        font-size: 0.9rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        transition: all 0.2s;
    }

    .btn-back {
        background-color: transparent;
        border: 1px solid #cbd5e1;
        color: var(--text-gray);
    }
    .btn-back:hover { border-color: var(--text-dark); color: var(--text-dark); }

    .btn-rent {
        background: var(--primary-color);
        color: white;
        border: none;
        gap: 8px;
    }
    .btn-rent:hover { background-color: #4338ca; transform: translateY(-1px); }

    /* Responsividade */
    @media (max-width: 768px) {
        .image-column { min-height: 250px; }
        .details-column { padding: 20px; }
        .property-title { font-size: 1.3rem; }
    }
</style>

<div class="container property-section">
    <div class="property-card">
        <div class="row g-0"> 
            
            <div class="col-lg-5">
                <div class="image-column">
                    {% if imovel.foto %}
                        <img src="{{ imovel.foto.url }}" alt="{{ imovel.nome }}" class="property-image">
                        <div class="badge-floating">
                            {{ imovel.categoria }}
                        </div>
                    {% else %}
                        <div class="no-photo-wrap">
                            <i class="fa-regular fa-image fa-2x mb-2"></i>
                            <small>Sem foto</small>
                        </div>
                    {% endif %}
                </div>
            </div>

            <div class="col-lg-7">
                <div class="details-column">
                    
                    <h1 class="property-title">{{ imovel.nome }}</h1>

                    <div class="property-price">
                        R$ {{ imovel.valor }} <span>/ mês</span>
                    </div>

                    <div class="features-grid">
                        <div class="feature-item">
                            <div class="feature-icon"><i class="fa-solid fa-ruler-combined"></i></div>
                            <span class="feature-text">{{ imovel.tamanho|default:"--" }} m²</span>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon"><i class="fa-solid fa-bed"></i></div>
                            <span class="feature-text">{{ imovel.numero_quarto }} Quartos</span>
                        </div>
                    </div>

                    <div class="desc-title">Sobre o imóvel</div>
                    <p class="property-description">
                        {{ imovel.descricao }}
                    </p>

                    <div class="action-buttons">
                        <a href="{% url 'home' %}" class="btn-back">
                            <i class="fa-solid fa-arrow-left" style="margin-right: 5px;"></i> Voltar
                        </a>
                        <button class="btn-rent">
                            <i class="fa-brands fa-whatsapp"></i> Tenho Interesse
                        </button>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}